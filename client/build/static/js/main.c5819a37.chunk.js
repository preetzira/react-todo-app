(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{103:function(e,t,a){},11:function(e,t,a){var n=a(112);e.exports={decryptString:function(e){var t=n.createDecipher("aes-256-cbc","d6F3Efeq"),a=t.update(e,"hex","utf8");return a+=t.final("utf8")},encryptString:function(e){var t=n.createCipher("aes-256-cbc","d6F3Efeq"),a=t.update(e,"utf8","hex");return a+=t.final("hex")}}},115:function(e,t){},117:function(e,t){},152:function(e,t){},153:function(e,t){},199:function(e,t,a){},200:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(94),s=a.n(r),c=a(33);a(103),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l=a(20),i=a(21),m=a(23),u=a(22),d=a(24),p=a(17),g=a(54),f=a(97),v=(a(26),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).handleInput=function(e){a.setState({value:e.target.value})},a.handleSubmit=function(){a.props.addTodo(a.state.value),a.setState({value:""})},a.state={value:""},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidUpdate",value:function(e,t){e.editTodo!==this.props.editTodo&&this.setState({value:this.props.editTodo})}},{key:"render",value:function(){return o.a.createElement("div",{className:"col-12 col-sm-12 mt-md-0 p-0 mx-auto"},o.a.createElement("form",{action:"javascript:void(0)",onSubmit:this.handleSubmit},o.a.createElement("div",{className:"input-group"},o.a.createElement("input",{value:this.state.value,onChange:this.handleInput,type:"text",className:"p-4 form-control br-b-0",id:"todoInput",placeholder:"Enter task to do",required:!0}),o.a.createElement("div",{className:"input-group-append"},o.a.createElement("button",{type:"submit",className:"btn btn-outline-primary add-todo p-2"},"Add task")))))}}]),t}(n.Component)),b=function(e){var t=e.items,a=e.selectTodo,n=e.deleteTodo,r=e.editTodo,s=e.showDetails;return t.length?o.a.createElement("ul",{className:"list-group"},t.map(function(e){return o.a.createElement("div",{key:e.key},o.a.createElement("li",{className:"list-group-item p-0"},o.a.createElement("ul",{className:"list-group list-group-horizontal no-gutters"},o.a.createElement("li",{className:"w-10 list-group-item d-flex justify-content-center align-self-center p-2"},o.a.createElement("div",{className:"custom-control custom-checkbox"},o.a.createElement("input",{onChange:function(){return a(e.key)},type:"checkbox",className:"custom-control-input",id:e.key.toString(36),name:"selected",checked:e.selected}),o.a.createElement("label",{className:"custom-control-label",htmlFor:e.key.toString(36)}))),o.a.createElement("li",{className:"w-70 list-group-item p-2 task-info ".concat(e.selected?"completed-task":""),onClick:function(){return s(e.key)}},e.task),o.a.createElement("li",{className:"w-20 list-group-item d-flex justify-content-center p-2"},o.a.createElement("button",{className:"btn btn-outline-secondary btn-sm align-self-center mr-1 edit-todo",onClick:function(){return r(e.key)},disabled:e.selected},"\u270e"),o.a.createElement("button",{className:"btn btn-outline-danger btn-sm align-self-center",onClick:function(){return n(e.key)},disabled:e.selected},"\u2716")))),o.a.createElement("div",{className:"row no-gutters text-secondary small ".concat(e.expanded?"show-details":"hide-details")},o.a.createElement("div",{className:"col-3"},o.a.createElement("span",{className:"p-1"},e.selected?"Completed":"Pending")),o.a.createElement("div",{className:"col-9 text-right"},o.a.createElement("span",{className:"p-1"},new Date(e.timestamp).toString().substr(0,24).trim()))))})):o.a.createElement("ul",{className:"list-group"},o.a.createElement("li",{className:"list-group-item text-center text-grey"},"Nothing to do"))},h=function(e){return o.a.createElement("div",{className:"row no-gutters"},o.a.createElement("div",{className:"col-md-12 mt-md-0 p-0 mx-auto"},o.a.createElement(b,{items:e.items,selectTodo:e.selectTodo,deleteTodo:e.deleteTodo,editTodo:e.editTodo,showDetails:e.showDetails})))},S=Object(p.f)(function(e){var t=e.history;return localStorage.accessToken?o.a.createElement("button",{className:"btn btn-danger btn-lg br-0",onClick:function(){var e;e=function(){return t.push("/")},localStorage.removeItem("accessToken"),setTimeout(e,100)}},"Sign out"):o.a.createElement(p.a,{to:"/login"})});var E=function(e){return o.a.createElement("header",null,o.a.createElement("nav",{className:"navbar navbar-expand-sm bg-white navbar-light justify-content-end p-0"},o.a.createElement("ul",{className:"navbar-nav"},o.a.createElement("li",{className:"nav-item"},o.a.createElement(S,null)))))},y=a(11),N=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).addTodo=function(e){a.newItem={task:e,key:Date.now(),timestamp:Date.now(),selected:!1,completed:!1,expanded:!1},a.setState({items:[].concat(Object(f.a)(a.state.items),[a.newItem])}),localStorage.setItem("items",Object(y.encryptString)(JSON.stringify(a.state.items))),a.saveStateToLocalStorage()},a.deleteTodo=function(e){var t=a.state.items.filter(function(t){return t.key!==e});a.setState({items:t}),a.saveStateToLocalStorage()},a.editTodo=function(e){var t=a.state.items.filter(function(t){return t.key===e});a.setState({currentItem:t[0].task}),a.deleteTodo(t[0].key)},a.selectTodo=function(e){a.state.items.map(function(t){t.key===e&&(t.selected=!t.selected)}),a.setState({items:a.state.items}),a.saveStateToLocalStorage()},a.showDetails=function(e){a.state.items.map(function(t){t.key===e&&(t.expanded=!t.expanded)}),a.setState({items:a.state.items}),a.saveStateToLocalStorage()},a.state={items:[],currentItem:"",loggedUser:""},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({loggedUser:localStorage.accessToken},function(){e.hydrateStateWithLocalStorage()}),window.addEventListener("beforeunload",this.saveStateToLocalStorage.bind(this))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("beforeunload",this.saveStateToLocalStorage.bind(this)),this.saveStateToLocalStorage()}},{key:"hydrateStateWithLocalStorage",value:function(){if(localStorage[this.state.loggedUser]){var e=JSON.parse(Object(y.decryptString)(localStorage.getItem(this.state.loggedUser))),t=e.items,a=e.currentItem;localStorage.setItem("items",Object(y.encryptString)(JSON.stringify(t))),localStorage.setItem("currentItem",Object(y.encryptString)(JSON.stringify(a)))}else localStorage.removeItem("items"),localStorage.removeItem("currentItem");for(var n in this.state)if(localStorage.hasOwnProperty(n)){var o=Object(y.decryptString)(localStorage.getItem(n));try{o=JSON.parse(o),this.setState(Object(g.a)({},n,o))}catch(r){this.setState(Object(g.a)({},n,o))}}}},{key:"saveStateToLocalStorage",value:function(){for(var e in localStorage.setItem(localStorage.accessToken,Object(y.encryptString)(JSON.stringify(this.state))),this.state)localStorage.setItem(e,Object(y.encryptString)(JSON.stringify(this.state[e])))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(E,null),o.a.createElement("div",{className:"row no-gutters"},o.a.createElement("div",{className:"todoApp col-10 col-md-5 mt-5 mx-auto"},o.a.createElement(v,{editTodo:this.state.currentItem,addTodo:function(t){return e.addTodo(t)}}),o.a.createElement(h,{items:this.state.items,selectTodo:function(t){return e.selectTodo(t)},deleteTodo:function(t){return e.deleteTodo(t)},editTodo:function(t){return e.editTodo(t)},showDetails:function(t){return e.showDetails(t)}}))))}}]),t}(o.a.Component),k=a(39),w=(a(199),function(){var e=Object(n.useState)(""),t=Object(k.a)(e,2),a=t[0],r=t[1],s=Object(n.useState)(""),c=Object(k.a)(s,2),l=c[0],i=c[1],m=Object(n.useState)(!1),u=Object(k.a)(m,2),d=u[0],g=u[1];function f(e){"username"===e.target.name?r(e.target.value):i(e.target.value)}return Object(n.useEffect)(function(){localStorage.accessToken&&g(!0),window.addEventListener("load",function(){localStorage.testUsers=Object(y.encryptString)(JSON.stringify([{username:"test",password:"test",access_token:"9qny49rhicurvyq94yxrnaciryw9"},{username:"bob",password:"alice",access_token:"493utrhdgkjhsc985nutsoaexr80"},{username:"sea",password:"side",access_token:"d9238459cxr90q8sd47w90xxn432"}]));var e=document.getElementsByClassName("needs-validation");Array.prototype.filter.call(e,function(e){e.addEventListener("submit",function(t){!1===e.checkValidity()&&(t.preventDefault(),t.stopPropagation()),e.classList.add("was-validated")},!1)})}(),!1)},[d]),d?o.a.createElement(p.a,{to:"/"}):o.a.createElement("div",{className:"row no-gutters"},o.a.createElement("div",{className:"col-lg-4 col-md-5 col-sm-6 col-10 mx-auto mt-5"},o.a.createElement("div",{className:"card px-1 py-5"},o.a.createElement("h3",{className:"text-secondary text-center mb-2"},"Log in here"),o.a.createElement("span",{className:"text-center mb-4"},o.a.createElement("code",{className:"small"},"use-credentials: ",o.a.createElement("br",null),JSON.stringify({test:"test",bob:"alice",sea:"side"}))),o.a.createElement("form",{action:"javascript:void(0)",onSubmit:function(e){e.preventDefault();var t=e.target[0].value,a=e.target[1].value,n=JSON.parse(Object(y.decryptString)(localStorage.getItem("testUsers"))).filter(function(e){return e.username===t&&e.password===a});n.length?(g(!0),localStorage.setItem("accessToken",n[0].access_token)):alert("use test-credentials to authenticate")},className:"needs-validation",noValidate:!0},o.a.createElement("div",{className:"col-md-10 col-10 mx-auto"},o.a.createElement("div",{className:"form-label-group"},o.a.createElement("input",{value:a,onChange:f,type:"text",id:"username",name:"username",className:"form-control form-control-custom",placeholder:"Enter your username here","aria-describedby":"inputGroupPrepend",required:!0}),o.a.createElement("label",{htmlFor:"username"},"Enter your username here"),o.a.createElement("div",{className:"invalid-feedback"},"Please enter a the required field."))),o.a.createElement("div",{className:"col-md-10 col-10 mx-auto"},o.a.createElement("div",{className:"form-label-group"},o.a.createElement("input",{value:l,onChange:f,type:"password",id:"password",name:"password",className:"form-control form-control-custom",placeholder:"Enter your password here","aria-describedby":"inputGroupPrepend",required:!0}),o.a.createElement("label",{htmlFor:"password"},"Enter your password here"),o.a.createElement("div",{className:"invalid-feedback"},"Please enter a the required field."))),o.a.createElement("div",{className:"col-md-10 col-10 mx-auto"},o.a.createElement("button",{type:"submit",className:"btn btn-outline-primary btn-lg form-control-custom"},"Sign in"))))))}),O=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement(p.d,null,o.a.createElement(p.b,{exact:!0,path:"/",component:N}),o.a.createElement(p.b,{path:"/login",component:w}))}}]),t}(o.a.Component);s.a.render(o.a.createElement(c.a,null,o.a.createElement(O,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},26:function(e,t,a){},98:function(e,t,a){e.exports=a(200)}},[[98,1,2]]]);
//# sourceMappingURL=main.c5819a37.chunk.js.map